<section class="section" ng-controller="pageHeader">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                 <div class="component-layout">
                     <div class="page-header">
                         <div class="page-header__inner">
                             <h1 class="page-header__title">{{pageHeader.title.manageGuests}}</h1>
                             <h2 class="page-header__subtitle">{{pageHeader.subtitle.manageGuests}}</h2>
                         </div>
                     </div>
                 </div>
            </div>
        </div>
    </div>
</section>


<section class="section" ng-controller="mainController">
    <div class="container">
        <div class="row">
            <div class="col-sm-3">
                <h2 class="section-title">
                        <strong>Filtruj</strong><span> - wyszukaj po frazie</span>
                </h2>
                <form>
                    <div class="form-group form-group--modern">
                        <div class="form-group__input">
                            <i aria-hidden="true" class="fa fa-search form-group__icon"></i>
                            <input type="text" class="form-control form-control--modern" placeholder="Wpisz frazę..." ng-model="searchPerson">
                        </div>
                        <p>&nbsp;</p>
                    </div>
                </form>
            </div>
            <div class="col-sm-3">
                <h2 class="section-title">
                        <strong>Wydrukuj</strong><span> - tabele (np. przefiltrowaną)</span>
                </h2>
                 <a href="#" ng-click="printTable()" class="btn btn-primary btn-sm btn-block">Pobierz PDF</a>
            </div>
        </div>
    </div>
    <div class="container" ng-controller="addNewGuest">
        <div class="row">
            <div class="col-xs-12">
                <h2 class="section-title">
                    <strong>Twoja lista gości</strong><span> - dane tabelaryczne</span>
                </h2>
                <div class="component table-management">
                    <!-- Table header -->
                    <div class="table-management__header">
                        <div class="table-management__row">
                            <div class="table-management__cell table-management__cell--index">L.P.</div>
                            <div class="table-management__cell table-management__cell--first-name">
                                <a href="#" ng-click="sortType = 'firstName'; sortReverse = !sortReverse">
                                    Imię
                                    <span ng-show="sortType == 'firstName'" class="fa"
                                          ng-class="sortReverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                                </a>
                            </div>
                            <div class="table-management__cell table-management__cell--surname">
                                <a href="#" ng-click="sortType = 'surName'; sortReverse = !sortReverse">
                                    Nazwisko
                                    <span ng-show="sortType == 'surName'" class="fa"
                                          ng-class="sortReverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                                </a>
                            </div>
                            <div class="table-management__cell table-management__cell--guest-count">
                                <a href="#" ng-click="sortType = 'guestCount'; sortReverse = !sortReverse">
                                    Liczba osób
                                    <span ng-show="sortType == 'guestCount'" class="fa"
                                          ng-class="sortReverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                                </a>
                            </div>
                            <div class="table-management__cell table-management__cell--children">
                                <a href="#" ng-click= "sortType = 'children'; sortReverse = !sortReverse">
                                    Dzieci
                                    <span ng-show="sortType == 'children'" class="fa"
                                          ng-class="sortReverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                                </a>
                            </div>
                           <div class="table-management__cell table-management__cell--membership">
                                <a href="#" ng-click= "sortType = 'membership'; sortReverse = !sortReverse">
                                    Przynależność
                                    <span ng-show="sortType == 'membership'" class="fa"
                                          ng-class="sortReverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                                </a>
                            </div>
                            <div class="table-management__cell table-management__cell--status">
                                <a href="#" ng-click="sortType = 'status'; sortReverse = !sortReverse">
                                    Status
                                    <span ng-show="sortType == 'status'" class="fa"
                                          ng-class="sortReverse ? 'fa-caret-up' : 'fa-caret-down'"></span>
                                </a>
                            </div>
                            <div class="table-management__cell">
                                Operacje
                            </div>
                        </div>
                        <div class="table-management__hidden-row">
                            <div class="table-management__cell">
                                Telefon
                            </div>
                            <div class="table-management__cell">
                                Informacje dodatkowe
                            </div>
                        </div>
                    </div>

                    <!-- Table body -->
                    <div class="table-management__body">
                        <div class="table-management__row table-management__row--body"
                             ng-repeat="person in persons | orderBy:sortType:sortReverse | filter:searchPerson" title="Gość: {{ person.firstName}} {{ person.surName}}">
                            <div class="table-management__cell table-management__cell--index"> {{ $index }}</div>
                            <div class="table-management__cell table-management__cell--first-name"> {{ person.firstName }}</div>
                            <div class="table-management__cell table-management__cell--surname"> {{ person.surName }}</div>
                            <div class="table-management__cell table-management__cell--guest-count"> {{ person.guestCount }}</div>
                            <div class="table-management__cell table-management__cell--children"> {{ person.children }}</div>
                            <div class="table-management__cell table-management__cell--membership"> {{ person.membership }}</div>
                            <div class="table-management__cell table-management__cell--status" data-status="{{(person.status === 'Oczekujący' ? 'Oczekujacy' : person.status) | lowercase}}"> {{ person.status }}</div>
                            <div class="table-management__cell table-management__cell--btn-group">
                                <div class="btn-group btn-group--xs">
                                    <a href="#/edit-guest/{{person.$id}}" class="btn btn-success btn-xs" title="Edytuj">Edytuj</a>
                                    <a href="#" class="btn btn-danger btn-xs" title="Usuń" ng-controller="ctrlDeletePerson" ng-click="deletePerson(person.$id)">Usuń</a>
                                </div>
                                <!-- <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" ng-attr-data-target="{{'#remove-person-modal--' + $index + 1}}">Usuń</button> -->
                                <!-- <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" ng-attr-data-target="{{'#edit-person-modal--' + $index + 1}}">Edytuj</button> -->
                            </div>
                            <div class="table-management__row-details" ng-click="tableManagementDetails($event)">Pokaż szczegóły</div>
                            <div class="table-management__hidden-row">
                                <ul class="table-management__list">
                                    <li><span>Telefon: </span>{{ person.phoneNumber }}</li>
                                    <li><span>Informacje dodatkowe: </span>{{ person.extraInformation }}</li>
                                    <li><span>Data dodania: </span>{{ person.dataAdded }}</li>
                                </ul>
                                <a href="#" ng-click="tableManagementHideDetails($event)" class="table-management__hide-button">Ukryj szczegóły</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
    </div>
</div>
</section>
